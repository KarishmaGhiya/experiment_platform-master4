{% extends "base_chat.html" %}

{% block content %}
  {% load staticfiles %}
<h4>PUZZLE:</h4> 
 <p>
     {{ problem }}
  </p>
<ul>
  {% for hint in hints %}
    <li>{{ hint }}</li>
  {% endfor %}
</ul>
<p><b>You will need to work with other Turkers to solve this puzzle.</b> Use the LIVE CHAT below to communicate with other Turkers working on the same problem. <br/>Use this shared <a href="{{url}}" target="_blank"> Google Document</a> to keep track of your answers as you work on the problem (it should open on a new page).</p>
<p>LIVE CHAT--Submit messages to communicate with other Turkers--</p>
<div id = "forum-frame" class="left" style="height:600px;width:700px;border:1px solid #ccc;padding-left:20px; padding-right:20px;font:16px/26px Georgia, Garamond, Serif;overflow:auto;">
  <form id="chatform">
    <table id="chat">
      <tbody>
        {% for message in messages %}
          <tr>
            <td>{{ message.formatted_timestamp }}</td>
            <td>{{ message.handle }}</td>
            <td>{{ message.message }}</td>
          </tr> 
        {% endfor %}
      </tbody>
      <tfoot>
      <tr>
        <td>Say something:</td>
        <td colspan=2>
          <input id="message" type="text" placeholder="message">
          <button type="submit" id="go">Say it</button>
        </td>
      </tfoot>
    </table>
  </form>
</div>
<br/>
<p>Once you hit finish, you will not be able to work on the task anymore. Only press it once you are sure you are done with the task.<br/><b>Remember your answers, you will need them to answer questions on the next page.</b></p>
<button onclick="location.href='{% url 'survey' %}'">Finish Task</button>

{% endblock content %}

{% block afterbody %}
  <script type="text/javascript" src='{% static "jquery-1.12.1.min.js" %}'></script>
  <script type="text/javascript" src='{% static "reconnecting-websocket.min.js" %}'></script>
  <script type="text/javascript" src='{% static "chat.js" %}'></script>
{% endblock afterbody %}
